var NoteApp={storageKey:"note"};(function(app){app.util={storage:{load:function(){console.log("storage.load()");return localStorage.getItem(app.storageKey)},save:function(event,data){console.log("storage.save()");localStorage.setItem(app.storageKey,data)}}}})(NoteApp);(function(app){var BtnAction={newNote:function(event){var storage=app.util.storage;storage.save(event,"");var $contents=$(".note-editable");$contents[0].innerHTML="";$(app).trigger("newNote")},fullScreen:function(){var docElm=document.documentElement;if(docElm.requestFullscreen){docElm.requestFullscreen()}else if(docElm.mozRequestFullScreen){docElm.mozRequestFullScreen()}else if(docElm.webkitRequestFullScreen){docElm.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}},FileSaver:function(){naming=false;while(!naming){var filename=window.prompt("저장할 파일명을 입력하세요","");console.log(filename);if(filename!=="")naming=true;else alert("파일명을 제대로 입력해주세요")}if(filename!==null){var $contents=$(".note-editable");var blob=new Blob([$contents[0].innerHTML],{type:"text/plain;charset=utf-8"});saveAs(blob,filename+".txt")}},about:function(){var $about=$("#about");$about.html("Note 웹어플리케이션 ver.1.0");$about.addClass("about");setTimeout(function(event){$about.html("");$about.removeClass("about")},1e3*3)}};app.ButtonAction=BtnAction})(NoteApp);(function($,app){var $memo=$("#memo");var $menu=$(".header .menu");var storage=app.util.storage;var $summernote=$("#summernote");var password=false;while(!password){var pass=window.prompt("비밀번호를 입력하세요","");console.log(pass);if(pass==="1234")password=true;else if(pass==="null")return;else alert("비밀번호가 틀렸습니다.")}bindEvent();$summernote.summernote({height:300,onInit:loadData,onKeyup:saveData});function saveData(event){var value=$summernote.code();storage.save(event,value)}function bindEvent(){$menu.on("click","a",function(event){var $btn=$(event.currentTarget);var action=$btn.data("action");app.ButtonAction[action]();return false});$(app).on("newNote",function(){$memo.val("")})}function loadData(){var html=storage.load();$summernote.code(html)}})(jQuery,NoteApp);